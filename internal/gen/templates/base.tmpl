{{/* base.tmpl - 生成 internal/biz/_base_gen.go */}}
// Code generated by lazyent. DO NOT EDIT.
package biz

import (
{{- range collectExternalImports .Nodes }}
	"{{ . }}"
{{- end }}
)


{{- range .Nodes }}
{{- $node := . }}
{{/* 遍历所有的 Enum 字段生成 Biz 层枚举类型 */}}
{{- range $f := .Fields }}
{{- if and $f.IsEnum (not (isExternalEnum $f)) }}
// {{ $f.StructField }} 枚举定义
type {{ $node.Name }}{{ $f.StructField }} int32

const (
{{- range $pair := getEnumPairs $f }}
	{{ $node.Name }}{{ $f.StructField }}{{ $pair.Key | pascal }} {{ $node.Name }}{{ $f.StructField }} = {{ $pair.Value }}
{{- end }}
)

func (e {{ $node.Name }}{{ $f.StructField }}) String() string {
	switch e {
{{- range $pair := getEnumPairs $f }}
	case {{ $node.Name }}{{ $f.StructField }}{{ $pair.Key | pascal }}:
		return "{{ $pair.Key }}"
{{- end }}
	default:
		return "UNKNOWN"
	}
}
{{- end }}
{{- end }}

// {{ .Name }}Base 是 {{ .Name }} 的基础结构体，包含自动生成的字段定义
type {{ .Name }}Base struct {
	UUID string
{{- range $f := .Fields }}
	{{- if not (isSensitive $f) }}
	{{ bizFieldName $f }} {{ if $f.IsEnum }}{{ if isExternalEnum $f }}{{ getExternalEnumName $f }}{{ else }}{{ $node.Name }}{{ $f.StructField }}{{ end }}{{ else }}{{ bizFieldType $f }}{{ end }}
	{{- end }}
{{- end }}
{{- range $e := .Edges }}
	{{- if isBizExclude $e }}{{ continue }}{{ end }}
	{{- /* Generate ID field */ -}}
	{{- if isBizIDOnly $e }}
	{{- if not $e.Unique }}
	{{ bizEdgeName $e }} []string
	{{- else }}
	{{ bizEdgeName $e }} {{ edgeIDType $e }}
	{{- end }}
	{{- end }}
	{{- /* Generate Relationship Field based on strategy */ -}}
	{{- if isBizPointer $e }}
	{{- if $e.Unique }}
	{{ bizEdgeName $e }} *{{ $e.Type.Name }}
	{{- else }}
	{{ bizEdgeName $e }} []*{{ $e.Type.Name }}
	{{- end }}
	{{- end }}
{{- end }}
}
{{- end }}
