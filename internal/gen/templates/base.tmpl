{{/* base.tmpl - 生成 internal/biz/_base_gen.go */}}
// Code generated by lazyent. DO NOT EDIT.
package biz

import (
{{- if hasTimeNodes .Nodes }}
	"time"
{{- end }}
{{- if hasUUIDNodes .Nodes }}
	"github.com/google/uuid"
{{- end }}
{{- range collectExternalImports .Nodes }}
	"{{ . }}"
{{- end }}
)


{{- range .Nodes }}
{{- $node := . }}
{{/* 遍历所有的 Enum 字段生成 Biz 层枚举类型 */}}
{{- range $f := .Fields }}
{{- if and $f.IsEnum (not (isExternalEnum $f)) }}
// {{ $f.StructField }} 枚举定义
type {{ $node.Name }}{{ $f.StructField }} int32

const (
{{- range $pair := getEnumPairs $f }}
	{{ $node.Name }}{{ $f.StructField }}{{ $pair.Key | pascal }} {{ $node.Name }}{{ $f.StructField }} = {{ $pair.Value }}
{{- end }}
)

func (e {{ $node.Name }}{{ $f.StructField }}) String() string {
	switch e {
{{- range $pair := getEnumPairs $f }}
	case {{ $node.Name }}{{ $f.StructField }}{{ $pair.Key | pascal }}:
		return "{{ $pair.Key }}"
{{- end }}
	default:
		return "UNKNOWN"
	}
}
{{- end }}
{{- end }}

// {{ .Name }}Base 是 {{ .Name }} 的基础结构体，包含自动生成的字段定义
type {{ .Name }}Base struct {
{{- if .ID }}
	{{ bizFieldName .ID }} {{ bizFieldType .ID }}
{{- end }}
{{- range $f := .Fields }}{{ if not (shouldGenerateBizField $f) }}{{ continue }}{{ end }}
	{{ bizFieldName $f }} {{ if and $f.IsEnum (not (isExternalEnum $f)) }}{{ $node.Name }}{{ $f.StructField }}{{ else }}{{ bizFieldType $f }}{{ end }}
{{- end }}
{{- range $e := .Edges }}{{ if not (shouldGenerateBizEdge $e) }}{{ continue }}{{ end }}
{{- if shouldBizPointer $e }}
	{{- if $e.Unique }}
	{{ bizEdgeName $e true }} *{{ $e.Type.Name }}
	{{- else }}
	{{ bizEdgeName $e true }} []*{{ $e.Type.Name }}
	{{- end }}
{{- else }}
	{{- if $e.Unique }}
	{{ bizEdgeName $e true }} {{ edgeIDType $e }}
	{{- else }}
	{{ bizEdgeName $e true }} []{{ edgeIDType $e }}
	{{- end }}
{{- end }}
{{- end }}
}
{{- end }}
